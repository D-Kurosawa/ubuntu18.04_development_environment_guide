# Linuxのディレクトリ構成

## Linuxの主要ディレクトリ一覧

Linuxは多数のファイルとディレクトリから構成されているシステムであり、そのディレクトリ構造を押さえることは、Linuxシステムをイメージとして捉える上で非常に重要になります。

ディストリビューションによって若干の違いはありますが、**FHS**(**Filesystem Hierarchy Standard**)というディレクトリ構成規格によって統一化が図られています。

まずは下記の一覧を確認して、どのようなディレクトリがあるのか確認してください。

---

- **Linuxの主要ディレクトリ構成**
  - [/](#root-directory)
    - [/bin](#bin)
    - [/boot](#boot)
    - [/dev](#dev)
    - [/etc](#etc)
      - [/etc/X11/](#etcx11)
      - [/etc/opt/](#etcopt)
      - [/etc/sgml/](#etcsgml)
      - [/etc/xml/](#etcxml)
    - [/home](#home)
    - [/lib](#lib)
    - [/lost+found](#lostfound)
    - [/media](#media)
    - [/mnt](#mnt)
    - [/opt](#opt)
    - [/proc](#proc)
    - [/root](#root)
    - [/sbin](#sbin)
    - [/tmp](#tmp)
    - [/srv](#srv)
    - [/sys](#sys)
    - [/usr](#usr)
      - [/usr/X11R6/](#usrx11r6)
      - [/usr/bin/](#usrbin)
      - [/usr/include/](#usrinclude)
      - [/usr/lib/](#usrlib)
      - [/usr/local/](#usrlocal)
      - [/usr/sbin/](#usrsbin)
      - [/usr/share/](#usrshare)
      - [/usr/src/](#usrsrc)
    - [/var](#var)
      - [/var/cache/](#varcache)
      - [/var/lock/](#varlock)
      - [/var/log/](#varlog)
      - [/var/mail/](#varmail)
      - [/var/run/](#varrun)
      - [/var/spool/](#varspool)
      - [/var/spool/mail/](#varspoolmail)
      - [/var/tmp/](#vartmp)

---

## WindowとLinuxのディレクトリ比較

FHSの正確な定義ではないですが、ざっくりこんな使われ方だから近いという趣旨で分類しています。

|Windows|働き|Linux|
|:---|:---|:---|
|レジストリ|Windowsのシステム設定・各種ソフトウェアの動作設定はレジストリに保存するのが一般的だが、UNIX系ではソフトウェアごとのテキストベース設定ファイルに保存するのが一般的。|/etc|
|C:\Windows\System32\drivers\etc|WindowsにもUNIX由来の設定ファイルがあるのでそれ用のディレクトリ…といってもほとんどの開発者にとってはhosts格納専用でしょう。|/etc|
|C:\Windows|コマンド。/binは一般ユーザ用で/sbinは管理用。/usr配下のはこれらの別名のことが多いが、独立していてオプショナルなコマンドを格納している構成もある。ここをいじっていいのはパッケージマネージャだけ。|/bin, /sbin, /usr/bin, /usr/sbin|
|C:\Windows\System32|共有ライブラリ。ここをいじっていいのはパッケージマネージャだけ。|/lib|
|C:\Windows\System32\drivers|ドライバ。UNIX系ではカーネルモジュールの一種としてドライバを位置づける。|/lib/modules/【OSバージョン】|
|C:\Program Files\Common Files|ユーザがインストールした共有ライブラリ|/usr/local/lib|
|C:\Program Files|ユーザがインストールしたプログラム。ディレクトリを作る。|/opt|
|（該当なし。ユーザーが自分で格納用ディレクトリを作ることが多い）|ユーザがインストールしたプログラム。ディレクトリを作らない単体のもの。|/usr/local/bin|
|C:\Users\【ユーザー名】|ユーザーのホームディレクトリ。UNIXでは管理者だけ/home以下でなく/rootというホームディレクトリを持つ。|/home/【ユーザー名】, /root|
|（ユーザーの）スタートアップ。とても深いディレクトリ。コマンド`shell:startup`で開けます。|ログイン時に実行されるプログラム。Windowsではショートカットを集めたフォルダだがUNIXではスクリプトファイル。|/home/【ユーザー名】/.bash_profile, .bash_login, .profile このほか、シェルプログラム起動のたびに実行される .bashrcも|
|（全員の）スタートアップ|〃|/etc/profile|
|コントロール パネル\システム\システムの詳細設定\環境変数|DOS時代はAUTOEXEC.BATで設定していた環境変数をWindowsではコントロールパネルで設定するようになりましたが、UNIXではDOSと同じく起動スクリプトで設定します。 注意点としてUNIXの環境変数はDOS/Windowsのものと違い、明示的にexportしたものしか子プロセスに引き継がれません。|/home/【ユーザー名】/.bash_profile, .bash_login, .profile, /etc/profile|
|C:\Users\【ユーザー名】\AppData\Roaming, Local, LocalLow|アプリが作るデータディレクトリ。WindowsではAppData以下に作られるが、UNIX系ではホームディレクトリ直下。.config以下に作る場合も。|/home/【ユーザー名】, /home/【ユーザー名】/.config|
|C:\ProgramData|サービスのデータ・ログ|/var|
|C:\inetpub|Webコンテンツ|/var/www|
|C:\Windows\Temp, C:\Users\【ユーザー名】\AppData\Local\temp|一時ファイル置き場。自動削除はされない。消えてるとしたら誰かがタイマーで消している。|/var/tmp|

実行ファイル1本のプログラムを展開するなら`/usr/local/bin/`、ディレクトリ構造持ったアプリを展開するなら`/opt/`あたりで良いと思います。

## Linuxの主要ディレクトリの説明

おさえて置くべき主要ディレクトリの説明をします。また、読み方も一緒に記載しますが、現場によっては、違う読み方があるかも知れないのでその点は注意が必要です。

### /(root-directory)

|**読み方**|**ルートディレクトリ**|
|:---|:---|
|**概要**|**最上位のディレクトリ**|

階層型ファイル構造における最上階層のディレクトリのことです。ルートディレクトリ以外のディレクトリはすべてサブディレクトリと呼ばれます。

### /bin

|**読み方**|**ビン**|
|:---|:---|
|**概要**|**一般ユーザー向けの基本コマンド**|

システム管理者(root)と一般ユーザーの両方が使う基本的なコマンドが格納されています。試しに、binディレクトリに格納されているコマンドを確認してみてください。

```bash
cd /bin
ls -l
```

`ls`、`mkdir`等の見慣れたコマンドが表示されたはずです。このような基本的なコマンドが格納されているのが`bin`ディレクトリです。

### /boot

|**読み方**|**ブート**|
|:---|:---|
|**概要**|**起動に必要なファイル**|

システム起動時に必要なファイルを格納しています。普段Linuxを使用していて、このディレクトリにあるファイルを 変更することは滅多にありません。

起動時にBIOSの制限を受けないようにするため、ルートファイルシステムとは別にディスクの先頭付近に配置されることがあります。起動に必要なファイルがあるという事だけ覚えておいてください。

### /dev

|**読み方**|**デブ**|
|:---|:---|
|**概要**|**デバイスファイル**|

デバイスファイルが保存されいるディレクトリです。Linuxでは**デバイスもファイルとして扱う**という設計思想がとられています。

これはUNIXから受け継いだ設計思想になり、プログラムを組んでデバイスを使用する場合は、普通のファイルを扱うのと同じ様に、デバイスファイルを**Open**して、**Read**、**Write**と順番に処理をして最後に**Close**するという手順でアクセスするようになっています。

しかし、`dev`ディレクトリのファイルを操作することは滅多にありません。意味も解らずに操作するとデバイスが使用できなくなってしまうので扱いには注意が必要です。

### /etc

|**読み方**|**エトセ**|
|:---|:---|
|**概要**|**設定ファイル**|

`etc`ディレクトリには**設定ファイル**が格納されています。システムに関する設定ファイルや、アプリケーションに関する設定ファイル、種類、数ともに様々ですべてを把握している人はあまりいないと思います。

代表的なものには、IPアドレスとホスト名をDNSサーバー参照なしでも名前の解決ができる**hosts**ファイルや、シェルの初期設定ファイル**profile**などがあります。

### /etc/X11/

X Window System、version11用の設定ファイル

### /etc/opt/

optの設定ファイル

### /etc/sgml/

SGMLの設定ファイル

### /etc/xml/

XMLの設定ファイル

### /home

|**読み方**|**ホーム**|
|:---|:---|
|**概要**|**ユーザーのホームディレクトリ**|

各ユーザーのホームディレクトリがあるディレクトリです。ログインしたときに最初にアクセスするディレクトリは`/home/ユーザー名`になり、ユーザー名がhogefugaの場合`/home/hogefuga`となります。

また、独立したファイルシステムにすることで、クォータを設定できたり保守性を向上させたりできます。

このディレクトリで、各一般ユーザーは作業を行います。

**※ FHSではオプション扱いとなっています。**

### /lib

|**読み方**|**リブ**|
|:---|:---|
|**概要**|**共有ライブラリ**|

システムの起動時に必要なものと`/bin`や`/sbin`ディレクトリにあるコマンドを
実行するのに必要なライブラリが保存されています。

ユーザーや管理者がこの`/lib`ディレクトリに直接アクセスすることは滅多にありません。

### /lost+found

|**読み方**|**ロストアンドファウンド or ロストファウンド**|
|:---|:---|
|**概要**|**システムのバックアップや復元用のファイル**|

システムのバックアップや復元用のファイルが配置されます。意図しない再起動やシャットダウン時に使われます。通常ユーザーが操作することはありません。

### /media

|**読み方**|**マウント**|
|:---|:---|
|**概要**|**リムーバブル媒体(media)のマウントポイント**|

CD-ROMドライブなどのリムーバブルメディアを使用するとき（マウント）に利用するマウントポイント用ディレクトリです。

### /mnt

|**読み方**|**マウント**|
|:---|:---|
|**概要**|**ファイルシステムの一時的なマウントポイント用ディレクトリ**|

CD-ROMドライブなどのリムーバブルメディアを使用するとき（マウント）に利用するマウントポイント用ディレクトリです。

`/media`との違いは、一時的なファイルシステム(fstabなど)のマウントに使う点です。一般ユーザーが利用することはなく、root専用のディレクトリと覚えたほうがいいでしょう。

### /opt

|**読み方**|**オプト**|
|:---|:---|
|**概要**|**実行時に書き換えられないアプリケーションソフトウェアパッケージ**|

RPMやdpkgといったパッケージ管理システムでプログラムをインストールする時に使用するディレクトリです。ディストリビューションによっては配置されません。

### /proc

|**読み方**|**プロック**|
|:---|:---|
|**概要**|**カーネルやプロセスに関する情報をテキストで表示する仮想ファイルシステム**|

カーネル内部の情報にアクセスする為の仮想的なファイルシステムです。Linuxサーバーのハードウェア情報などを知るための情報ファイルが存在しています。プロセス独自の情報を格納することからプロセスディレクトリと呼ばれます。

例えば、CPU情報やメモリの使用状況、ネットワーク情報などが参照できます。

```bash
# CPU情報を参照する場合
view /proc/cpuinfo

# メモリ情報を参照する場合
view /proc/meminfo
```

但し、仮想的なファイルシステムになるため、ファイルのように見えますが、実際にはディスク上に存在しません。

### /root

|**読み方**|**ルート**|
|:---|:---|
|**概要**|**root用ホームディレクトリ**|

システム管理者(root)のホームディレクトリです。以前は`/`(ルートディレクトリ)がホームディレクトリとして使われていましたが、`/root`が使われるように変更されました。

`/home`の一般ユーザーのホームディレクトリと別になっているのは、`/home`が壊れても`/root`で作業が出来るようにという配慮からです。

**※FHSではオプション扱いとなっています。**

### /sbin

|**読み方**|**エスビン**|
|:---|:---|
|**概要**|**システム管理用コマンド**|

システム管理者(root)が使用するコマンドが格納されています。主に、起動、停止やリカバリーのようなシステム管理に必要なコマンドです。

システム停止やサービスなどのシステムに直接関係のある大切なコマンドばかり格納されているディレクトリのため、
セキュリティーの配慮として、一般ユーザーは実行できないよう権限が与えられています。

**※rootのみが実行可能になっています。**

### /srv

|**読み方**|**エスアールブイ**|
|:---|:---|
|**概要**|**FTP、WWW専用のユーザー用ディレクトリ**|

FTP、WWWなどで利用するユーザー用のスペースです。`/home`とも違うFTP専用、WWW専用のユーザー用ディレクトリです。管理者が一人の場合は利用しません。

### /sys

|**読み方**|**シス**|
|:---|:---|
|**概要**|**ドライバ関連のプロセス**|

システム関連と思いきや、動作しているプロセスやドライバを`/proc`で管理すると膨大になるため、`/sys`にドライバ関連のプロセスをまとめて配置している。しかし完全に分離されているわけでなく、現在では渾然としている。主にdeviceやmoduleに各種情報が保存されている。

### /tmp

|**読み方**|**テンプ**|
|:---|:---|
|**概要**|**ファイルなどを一時的に保管するディレクトリ**|

一時的にファイルを保存したり、作業したりするためのディレクトリです。**再起動などをするとこのディレクトリ内のファイルは削除されてしまいます**ので使用には注意が必要です。

大切なファイルは間違ってもtmpディレクトリに保存してはいけません。

**※テンポラリ（temporary:一時的な）からこの名前がつけられいます。**

**※すべてのユーザーが読み書き可能です。**

### /usr

|**読み方**|**ユーザー**|
|:---|:---|
|**概要**|**プログラムやカーネルソース**|

ユーザー向けのディレクトリでたくさんのサブディレクトリを持っています。

代表的なものの1つに`/usr/local`ディレクトリがありますが、これはRedhat系Linuxのパッケージ管理システムの
管理対象外で、ソースからコンパイルしたプログラムなどをここに保存するのが一般的です。

### /usr/X11R6/

XFree86(X Window System)用ファイルが配置されます。

### /usr/bin/

`/bin`と同じだが基本的なコマンドではないものが配置されています。具体的には、ユーザーが一般的に使用するコマンドで緊急時のシステム保守に必須ではないコマンドが配置されます。

システムの標準でプログラムをインストールした場合は大抵の場合はこのディレクトリが使用されます。

### /usr/include/

標準includeファイルが配置されます。

### /usr/lib/

`/lib`と同類です。プログラムに必要な共有ライブラリが配置されます。

### /usr/local/

ローカルシステムで必要とされるコマンドやライブラリ、ドキュメントなどが配置されます。このディレクトリ内は、さらに`bin`、`sbin`、`lib`などに細分化されます。

一般に`/usr/local`以下には、自分でコンパイルしたものを置いておくために使われます。`/usr/bin`や`/bin`はシステムの標準のコマンドが置かれますが、`/usr/local/bin`にはそれ以外のものを置きます。

システムの標準とは別に**自分で作った**、または**ダウンロードしてきた**ものを使う場合は、このディレクトリに置かれます。例えば、OS標準の`make`が使えず、`GNU make`が必要といったことは良くある話です。しかし標準のmakeを置き換えてしまうことは、望ましくない結果を生む可能性が高いです。

このような場合、`/usr/local/bin`に`GNU make`を入れ、コマンドパスで`/usr/local/bin`を`/usr/bin`より先に書くだけで、簡単に`make`を差し替える事ができます。つまり、システムの標準は`/usr/bin`、そうでないものは`/usr/local/bin`とすることで、ユーザーは新しいコマンドをインストールして使うことができます。もし問題があれば`/usr/local/bin`のコマンドを削除するだけで解決します。

これは**新しいバージョンなどを試したい**と言った時にも有効です。

### /usr/sbin/

`/sbin`と同じだが基本的なコマンドではないものが配置されています。具体的には、システム管理コマンドで
緊急時のシステム保守に必須ではないコマンドが配置されます。

### /usr/share/

アーキテクチャに依存しない共有データが配置されます。具体的には、x86やAlphaといったシステムアーキテクチャに依存しないファイルが配置されます。

例えば`/usr/share/man`には、`man`コマンドで使用されるマニュアルが配置されます。

### /usr/src/

ソースコード(Linuxカーネルソースとそのヘッダファイル)などが配置されます。

### /var

|**読み方**|**バア**|
|:---|:---|
|**概要**|**システムログなどの動的に変化するファイル**|

このディレクトリも`tmp`と同じように一時ファイルを保存しておくディレクトリです。しかし、ここに保存されているファイルは、サーバーを再起動しても**削除されません**。

保存されているファイルの種類は**変化していくファイル**です。代表的なものにはシステムログファイルやメール、プリンタのスプールファイルがあります。エラーの際にチェックするシステムログファイルの`/var/log/messages`は、この`/var`ディレクトリに保存されています。

### /var/cache/

manコマンドで表示する為に整形したデータなど、一時的なキャッシュファイルが配置されます。

### /var/lock/

使用中リソースを保持するファイルを配置します。具体的には、アプリケーションが排他制御に使用するロックファイルが配置されます。

### /var/log/

各種ログファイルが出力されます。システムのログファイル(messages)、メールのログファイル(maillog)などが配置されます。

### /var/mail

ユーザーのメールボックスが配置されます。

### /var/run/

ブート以降のシステムの状態を示すファイルが配置されます。PIDを格納したファイルを参照することで、PIDの確認が行えます。

### /var/spool/

処理を待つバッファであるスプールが配置されます。送信待ちメールや、印刷待ちデータなどになります。

### /var/spool/mail/

互換のために残された、かつてのユーザーのメールボックスです。

### /var/tmp/

一時ファイル置場です。マルチユーザーモードではこちらの使用が推奨されます。

## <参考元>

- [WindowsのあのフォルダはUNIX/Linuxで言えばあそこだ](https://qiita.com/yuba/items/669f718fe6e62dbaab19)
